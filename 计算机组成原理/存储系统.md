**6**.2 6.4 6.5.3-6.5.6
7.1 7.2

# 目录：
## [[存储系统-概述]]
## [[存储系统-RAM&ROM]]
## [[存储系统-并行存储器]]
## [[存储系统-cache]]
## [[存储系统-虚拟存储器]]

## 3.1 存储系统概述
###  3.1.1 存储系统的层次结构
定义：利用不同容量、成本、功耗和速 度的多种存储器构成有机结合的多级存储系统
目的：
1. 解决存储器与CPU之间相对速度差距过大的问题
2. 解决成本和性能之间的矛盾

#### 1. 程序的局部性原理
定义：在某一段时间内 频繁访问某一局部的存储器地址空间，而对此范围以外的地址空间则很少访问的现象

两个角度：
1. 时间局部性：最近被访问的信息很可能还要被访问。
2. 空间局部性：最近被访问的信息邻近地址的信息也可能被访问。
#### 2. 多级存储系统组成
1. 内存储器(内存)
	1. 寄存器
		1. cache(一级L1，二级L2 ...)
	2. 主存
2. 外存储器(外存)
![[Pasted image 20250318132844.png]]
==速度与容量的博弈==
### 3.1.2 存储器的分类
存储位元：存放一个二进制位
存储单元：多个存储位元组成
存储单元：多个存储单元组成

1. 存储介质：
	- 半导体器件
	- 磁性材料
	- 光存储器
2.  存储方式：
	- 随机存储存储器
	- 顺序存储存储器
	- 半顺序(直接)存取存储器
3. 读写功能：
	- 只读存储器(ROM)  
	- 随机存取存储器(RAM)
		- 静态SRAM：半导体管的“导通”或“截止”来记忆的（双稳态触发器），只要不掉电，储存信息就不会丢失（L1，L2,L3缓存）
		- 动态DRAM：信息是用电荷储存在电容上，随着时间的推移电荷会逐渐漏掉，储存信息丢失(速度慢，便宜)（传统意义上的内存）

### 3.1.3 存储器的编址和端模式
字存储单元：存放一个机器字的存储单元
字地址: 字存储单元相应的单元地址
存放一字节的单元，称为字节存储单元，相应的地址称为字节地址

对于一个字地址，通过存储其中字节的方式，分为大端小端方式，

12345678H如何在主存中存储？  
大端方式：12|34|56|78， 顺序存储
小端方式：78|56|34|12，逆序存储

其中大端字地址为高位字节地址
	小段字地址为低位字节地址

### 3.1.4 存储器的技术指标
- 存储容量
- 存取时间：从存储器接收到读/写命令开始到信息被读出或写 入完成所需的时间
	- 存储介质的物理性质
	- 寻址部件的结构
- 存储周期：连续读写过程中一次完整的存取操作所需的时间
		连续两次独立的存储器操作所需的最小时间间隔
		（通常存取时间小于存储周期, 由于两次操作间驱动放大等电路需要稳定时间）
- 存储器带宽(数据传送速率, 频宽)：单位时间里存储器所存取的信息量 （位/秒）

### 存储芯片译码驱动方式
#### 1. 线选法
![[Pasted image 20250324100104.png|450]]
将地址编为一位的列，译码器n位输入，$2^n$位输出，当n很大时，需要大量的输出线

#### 2. 重合法
![[Pasted image 20250324100513.png|450]]
将地址编码位（x,y）的行列二位地址。


如果需要20位地址线，线选法需要 1 M条线，而重合法只需 2* 1 K 条线
## 3.2 静态随机存取存储器
静态随机存取存储器(SRAM)的优点是==存取速度快==，但存储密度和容量不如 DRAM 大。
### 3.2.1 基本的静态存储元阵列
![[Pasted image 20250318141406.png|500]]
1. 存储位元
2. 三组信号线：
	1. 地址线
	2. 数据线
	3. 控制线
### 3.2.2 基本的 SRAM 逻辑结构

地址线共 15 条，其中 x 方向 8 条(A0～A7)，经行译码输出 256 行，y 方向 7 条(A8～A14)
双向数据线有 8 条，即 I/O_1～I/O_7。
（256 行×128 列×8位）
![[Pasted image 20250318141706.png]]
- **$\overline{CS}$（片选信号）**：当 CS 为低电平（有效）时，表明该 SRAM 芯片被选中，内部的门 G1 和 G2 都被打开，此时芯片能够参与操作。
- **$\overline{OE}$（输出使能信号）**：当 OE 为低电平时，开启门 G2，允许数据输出，实现读操作。
- **$\overline{WE}$（写使能信号）**：在写操作时，WE 为低电平，门 G1 被开启；而在读操作时，WE 为高电平，门 G1 关闭。这样通过门 G1 和 G2 的互锁控制，确保同一时间只能进行读操作或写操作，避免数据混乱。
-

### 3.2.3 SRAM 读/写时序
![[Pasted image 20250318142644.png|500]]

### 3.2.4 存储器容量的扩充      ==重点==
1. 位扩展：地址线和控制线公用而数 据线单独分开连接。
	- 例：4位到8位，由一片变两片
2. 字扩展：给定芯片的地址总线和数据总线公用，读写控制信号线公用，由地址总线的高位译码产生片选信号，让各个芯片分时工作。
3. 字位扩展 若给定的芯片的字数和位数均不符合要求，则需要先进行位扩展，再进行字扩展。

作业：1-7

## 3.3 动态随机存取存储器(DRAM)
### 3.3.1 DRAM 存储元的工作原理
SRAM具有两个稳定的状态。而动态随机存取存储器 (DRAM)简化了每个存储元的结构，因而 DRAM 的存储密度很高，通常用作计算机的主存储器。
### 3.3.2 DRAM芯片的逻辑结构
![[Pasted image 20250324084702.png]]
由于DRAM容量大，为了减少芯片的引脚数量，采用行列分时传送。例如上芯片本来需要20位引脚用于地址编码，现在只需10位，先$\overline{RAS}$,打入行地址锁存器，再$\overline{CAS}$打入列地址锁存器。
### 3.3.3 DRAM 读/写时序
![[Pasted image 20250324085153.png]]
读写周期为$\overline{RAS}$的下降沿到下一个$\overline{RAS}$的下降沿之间的时间。通常为控制方便，读周期和写周期时间相等。
### 3.3.4 DRAM 的刷新操作
DRAM 存储位元是基于电容器上的电荷量存储信息的，读操作是破坏性的，而且未读写的存储元电荷量也会逐渐流失，需要定时刷新。
由于自动刷新不需要给出列地址，而行地址由片内刷新计数器自动生成，故 3.11 例：DRAM 存储容量 扩展 72 计算机组成原理 可利用CAS 信号先于 RAS 信号有效来启动一次刷新操作，地址信号无效。


#### 刷新策列： 
1. 集中式刷新策略：
	   64ms 的刷新周期时间：进行一段时间的读写操作后，集中刷新所有8192行，此时读写操作被暂停，这段集中刷新操作时间为“死时间”
2. 分散式刷新策略：
		每一行的刷新操作被均匀地分配到刷新周期时间内。由于 64ms 除以 8192 约等于 7.8μs，所以 DRAM 每隔 7.8μs 刷新一行。
3. 异步刷新（集中分散组合）
		

### 3.3.5 突发传输模式
DRAM价格便宜，存储量大，适合作为主存，为了提升访问速度，采用突发访问技术：
	是在存储器同一行中对相邻的存储单元进行连续访问的方式(突发长度几字节—数千字)

### 3.3.6 同步 DRAM(SDRAM)


## 3.4 只读存储器(ROM)
1. 掩膜ROM（MROM）
	只能读不能擦除
2. PROM（一次编程）
3. EPROM（多次性编程）：紫外线擦除
4. EEPROM（多次性编程）： 电可擦写，局部擦写
5. 闪存

